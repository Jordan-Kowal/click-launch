project_name: "Development Services"

processes:
  - name: "Web Server"
    base_command: "bash ./resources/web-server.sh"
    env:
      NODE_ENV: development
      DEBUG: "server:*"
      API_URL: "http://localhost:8000"
    args:
      - type: "toggle"
        name: "Watch Mode"
        values:
          - value: true
            output: "--watch-mode=true"
          - value: false
            output: ""
        default: false

      - type: "select"
        name: "Environment"
        values:
          - value: "development"
            output: "--environment=development"
          - value: "staging"
            output: "--environment=staging"
          - value: "production"
            output: "--environment=production"
        default: "development"

      - type: "input"
        name: "Port"
        default: "3000"
        output_prefix: "--port"

  - name: "Database"
    base_command: "bash ./resources/database.sh"
    args:
      - type: "select"
        name: "Compression"
        values:
          - value: "gzip"
            output: "--compression=gzip"
          - value: "zstd"
            output: "--compression=zstd"
          - value: "none"
            output: "--compression=none"
        default: "gzip"

      - type: "select"
        name: "Verbosity"
        values:
          - value: "debug"
            output: "--verbosity=debug"
          - value: "info"
            output: "--verbosity=info"
          - value: "warn"
            output: "--verbosity=warn"
        default: "info"

      - type: "input"
        name: "Port"
        default: "5432"
        output_prefix: "--port"

  - name: "API Server"
    base_command: "bash ./resources/api-server.sh"
    args:
      - type: "toggle"
        name: "Enable Caching"
        values:
          - value: true
            output: "--cache-enabled=true"
          - value: false
            output: "--cache-enabled=false"
        default: true

      - type: "input"
        name: "Rate Limit (req/min)"
        default: "1000"
        output_prefix: "--rate-limit"

      - type: "input"
        name: "Custom Port"
        default: "8000"
        output_prefix: "--custom-port"

  - name: "Counter with Replacement"
    base_command: "bash ./resources/counter-with-replacement.sh"

  - name: "Infinite Process"
    base_command: "bash ./resources/infinite-process.sh"

  - name: "Crashing Process (Auto-Restart)"
    base_command: "bash ./resources/crashing-process.sh 3 1"
    restart:
      enabled: true
      max_retries: 3
      delay_ms: 1000
      reset_after_ms: 30000

  - name: "Crashing Process (No Restart)"
    base_command: "bash ./resources/crashing-process.sh 2 1"

  - name: "Show Working Directory"
    base_command: "bash show-cwd.sh"
    cwd: "./resources"
